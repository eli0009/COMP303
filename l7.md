# Object state

## Abstract state

An abstract state is a state that impact how an object would be used. For example appending to a linked list when it is empty vs when it has more than 1 element

## Optional type

Use `Optional.empty()` instead of `null` to help avoid nullpointer exceptions.
```java
// create null in optional
Optional<String> nullStr = Optional.empty();
// turn object into optional, works with null value
Optional<String> str = Optional.ofNullable("Hello");
// if-else
nullStr.ifPresentOrElse(t -> System.out.println(t), () -> System.out.println("String is empty"));
System.out.println(nullStr.isEmpty()); // True
System.out.println(str.isPresent()); // True
// Get the value, doesn't work with empty Optional
System.out.println(str.get());
```

## Null Object design pattern

Goal: avoid `null` and `Optional`, but still avoid nullpointer exceptions.

Create an implementation of an interface that represents a null class instead of directly passing `null` so that the code doesn't break when null isn't checked.


## Flyweight design pattern

Goal: Avoid redundancy when storing data

Create an array that contains the values, then newly created object simply need to keep track of the index of the value, thus saving memory. 3 steps to realize this:
1. private constructor 
2. static flyweight store (ex: array) that stores all the flyweight objects
3. static access method that returns the flyweigth objects according to a key
```java
class Scarlet {
    private String name;
    private static final Scarlet[] s = new Scarlet[2];

    static {
        s[0] = new Scarlet("Flandre");
        s[1] = new Scarlet("Remilia");
    }

    enum AGE {
        YOUNG, OLD
    }

    private Scarlet(String name) {
        this.name = name + " Scarlet";
    }

    public static Scarlet get(AGE a) {
        assert a != null;
        return s[a.ordinal()];
    }

    public String toString() {
        return name;
    }
}

public class Main {

    public static void main(String[] args) {

        Scarlet flan = Scarlet.get(Scarlet.AGE.YOUNG);
        System.out.println(flan);
    }
}
```